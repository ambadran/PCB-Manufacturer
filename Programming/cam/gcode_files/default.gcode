; This gcode is generated by my specialised python script for my PCB manufacturer project :))

; Machine Initialization Sequence...

G21 ; to set metric units
G90 ; to set absolute mode , G91 for incremental mode
G94 ; To set the active feed rate mode to units per minute mode

M5 ; disabling spindle PWM
C0 ; Choosing the empty tool slot in the multiplexer circuits

B1 ; Turn ON Machine

$H ; Homing :)
G10 P0 L20 X0Y0Z0 ; Force Reset current coordinates after homing


; The following gcode is the PCB holes drill gcode

; Getting and Activating Tool-2, The Tool.Spindle
G01 X0Y0Z0 ; Go to Tool-2 Home Pos
G21G90G01X25 ; Enter Female Kinematic Mount Home Pos
G21G90
A1 ; Latch on Kinematic Mount
G4 P5000 ; Wait for Kinematic Mount to fully attach
G21G90G01X-98 ; Exit Female Kinematic Mount Home Pos
G21G90
#TODO X0Y0Z0 ;  ;Add tool offset coordinate
C2 ; Choosing tool 2 in the choose demultiplexer circuits

F700 ; setting default feedrate

S230 ; sets pwm speed when we enable it

G01 Z20F10 ; Moving Spindle to UP Postion

M3 ; Turn Motor ON
G4 P2000 ; dwell for 2 seconds so motor reaches full RPM

G01 X44.545Y26.125F700
G01 Z25F10
G01 Z20F10
G01 X44.545Y18.505F700
G01 Z25F10
G01 Z20F10
G01 X18.11Y28.235F700
G01 Z25F10
G01 Z20F10
G01 X18.16Y15.985F700
G01 Z25F10
G01 Z20F10
G01 X6.11Y16.035F700
G01 Z25F10
G01 Z20F10
G01 X6.11Y28.235F700
G01 Z25F10
G01 Z20F10
G01 X12.16Y30.185F700
G01 Z25F10
G01 Z20F10
G01 X43.165Y29.305F700
G01 Z25F10
G01 Z20F10
G01 X41.895Y29.305F700
G01 Z25F10
G01 Z20F10
G01 X40.625Y29.305F700
G01 Z25F10
G01 Z20F10
G01 X36.915Y7.055F700
G01 Z25F10
G01 Z20F10
G01 X39.455Y7.055F700
G01 Z25F10
G01 Z20F10
G01 X41.995Y7.055F700
G01 Z25F10
G01 Z20F10
G01 X44.535Y7.055F700
G01 Z25F10
G01 Z20F10
G01 X17.875Y6.445F700
G01 Z25F10
G01 Z20F10
G01 X22.955Y6.445F700
G01 Z25F10
G01 Z20F10
G01 X47.085Y26.13F700
G01 Z25F10
G01 Z20F10
G01 X47.085Y18.51F700
G01 Z25F10
G01 Z20F10
G01 X39.465Y26.13F700
G01 Z25F10
G01 Z20F10
G01 X39.465Y18.51F700
G01 Z25F10
G01 Z20F10
G01 X42.005Y18.51F700
G01 Z25F10
G01 Z20F10
G01 X42.005Y26.13F700
G01 Z25F10
G01 Z20F10
G01 X42.025Y10.255F700
G01 Z25F10
G01 Z20F10
G01 X44.525Y10.255F700
G01 Z25F10
G01 Z20F10
G01 X40.64Y14.7F700
G01 Z25F10
G01 Z20F10
G01 X42.64Y14.7F700
G01 Z25F10
G01 Z20F10
G01 X46.958Y12.824F700
G01 Z25F10
G01 Z20F10
G01 X46.958Y15.364F700
G01 Z25F10
G01 Z20F10
G01 X12.16Y6.445F700
G01 Z25F10
G01 Z20F10
G01 X7.08Y6.445F700
G01 Z25F10
G01 Z20F10
G01 X35.89Y28.235F700
G01 Z25F10
G01 Z20F10
G01 X35.94Y15.985F700
G01 Z25F10
G01 Z20F10
G01 X23.89Y16.035F700
G01 Z25F10
G01 Z20F10
G01 X23.89Y28.235F700
G01 Z25F10
G01 Z20F10
G01 X29.94Y30.185F700
G01 Z25F10
G01 Z20F10

M5 ; disabling spindle PWM

; Returning the Deactivating Tool-2
C0 ; PWM Tool select demultiplexer to select tool zero which is the empty tool slot in multiplexers
#TODO X0Y0Z0 ;  ;Remove tool offset coordinate
G01 X0Y0Z0 ; Go to Tool-2 Home Pos
G21G90G01X98 ; Enter Female Kinematic Mount Home Pos
G21G90
A0 ; Latch OFF Kinematic Mount
G4 P5000 ; Wait for Kinematic Mount to fully detach
G21G90G01X-25 ; Exit Female Kinematic Mount Home Pos
G21G90


; The following gcode is the ink laying gcode
; According to input gerber file it will have 11 number of y iterations and Over-lapping distance is 1.2

; Getting and Activating Tool-3, The Tool.Pen
G01 X0Y0Z0 ; Go to Tool-3 Home Pos
G21G90G01X25 ; Enter Female Kinematic Mount Home Pos
G21G90
A1 ; Latch on Kinematic Mount
G4 P5000 ; Wait for Kinematic Mount to fully attach
G21G90G01X-98 ; Exit Female Kinematic Mount Home Pos
G21G90
#TODO X0Y0Z0 ;  ;Add tool offset coordinate
C3 ; Choosing tool 3 in the choose demultiplexer circuits

F100 ; setting default feedrate for ink laying

G00X2.8Y2.8Z10 ; ; Go to ink laying starting position
G01 X48.825
G01 Y5.6
G01 X2.8
G01 Y8.4
G01 X48.825
G01 Y11.2
G01 X2.8
G01 Y14.0
G01 X48.825
G01 Y16.8
G01 X2.8
G01 Y19.6
G01 X48.825
G01 Y22.4
G01 X2.8
G01 Y25.2
G01 X48.825
G01 Y28.0
G01 X2.8
G01 Y30.8
G01 X48.825
G01 Y33.6

G00Z0 ; Get away from PCB in Z axis

M5 ; Disable End-Effector Signal

; Returning the Deactivating Tool-3
C0 ; PWM Tool select demultiplexer to select tool zero which is the empty tool slot in multiplexers
#TODO X0Y0Z0 ;  ;Remove tool offset coordinate
G01 X0Y0Z0 ; Go to Tool-3 Home Pos
G21G90G01X98 ; Enter Female Kinematic Mount Home Pos
G21G90
A0 ; Latch OFF Kinematic Mount
G4 P5000 ; Wait for Kinematic Mount to fully detach
G21G90G01X-25 ; Exit Female Kinematic Mount Home Pos
G21G90


; The following gcode is the PCB trace laser marking gcode

; Getting and Activating Tool-1, The Tool.Laser
G01 X165Y0Z9 ; Go to Tool-1 Home Pos
G21G90G01X25 ; Enter Female Kinematic Mount Home Pos
G21G90
A1 ; Latch on Kinematic Mount
G4 P5000 ; Wait for Kinematic Mount to fully attach
G21G90G01X-98 ; Exit Female Kinematic Mount Home Pos
G21G90
#TODO X0Y0Z0 ;  ;Add tool offset coordinate
C1 ; Choosing tool 1 in the choose demultiplexer circuits

F600 ; setting default feedrate

G00Z16 ; Moving to correct focal length Z position

S150 ; Setting Laser Power

#TODO

M5 ; Disable End-Effector Signal

; Returning the Deactivating Tool-1
C0 ; PWM Tool select demultiplexer to select tool zero which is the empty tool slot in multiplexers
#TODO X0Y0Z0 ;  ;Remove tool offset coordinate
G01 X165Y0Z9 ; Go to Tool-1 Home Pos
G21G90G01X98 ; Enter Female Kinematic Mount Home Pos
G21G90
A0 ; Latch OFF Kinematic Mount
G4 P5000 ; Wait for Kinematic Mount to fully detach
G21G90G01X-25 ; Exit Female Kinematic Mount Home Pos
G21G90

G00X0Y0Z0
B0 ; Turn Machine OFF
