; This gcode is generated by my specialised python script for my PCB manufacturer project :))

; Machine Initialization Sequence...

G21 ; to set metric units
G90 ; to set absolute mode , G91 for incremental mode
G94 ; To set the active feed rate mode to units per minute mode

M5 ; disabling spindle PWM
C0 ; Choosing the empty tool slot in the multiplexer circuits

B1 ; Turn ON Machine

$H ; Homing :)
G10 P0 L20 X0Y0Z0 ; Force Reset current coordinates after homing


; The following gcode is the PCB holes drill gcode

; Getting and Activating Tool-2, The Tool.Spindle
G01 X165Y91Z12 ; Go to Tool-2 Home Pos
G01 X188 ; Enter Female Kinematic Mount Home Pos
A1 ; Latch on Kinematic Mount
G4 P5 ; Wait for Kinematic Mount to fully attach
G01 X92 ; Exit Female Kinematic Mount Home Pos
#TODO X0Y0Z0 ;  ;Add tool offset coordinate
C2 ; Choosing tool 2 in the choose demultiplexer circuits

F700 ; setting default feedrate

S230 ; sets pwm speed when we enable it

G01 Z20F10 ; Moving Spindle to UP Postion

M3 ; Turn Motor ON
G4 P2 ; dwell for 2 seconds so motor reaches full RPM

G01 X47.545Y29.125F700
G01 Z25F10
G01 Z20F10
G01 X47.545Y21.505F700
G01 Z25F10
G01 Z20F10
G01 X21.11Y31.235F700
G01 Z25F10
G01 Z20F10
G01 X9.11Y31.235F700
G01 Z25F10
G01 Z20F10
G01 X38.89Y31.235F700
G01 Z25F10
G01 Z20F10
G01 X26.89Y31.235F700
G01 Z25F10
G01 Z20F10
G01 X21.16Y18.985F700
G01 Z25F10
G01 Z20F10
G01 X9.11Y19.035F700
G01 Z25F10
G01 Z20F10
G01 X15.16Y33.185F700
G01 Z25F10
G01 Z20F10
G01 X20.875Y9.445F700
G01 Z25F10
G01 Z20F10
G01 X15.16Y9.445F700
G01 Z25F10
G01 Z20F10
G01 X38.94Y18.985F700
G01 Z25F10
G01 Z20F10
G01 X26.89Y19.035F700
G01 Z25F10
G01 Z20F10
G01 X32.94Y33.185F700
G01 Z25F10
G01 Z20F10
G01 X46.165Y32.305F700
G01 Z25F10
G01 Z20F10
G01 X44.895Y32.305F700
G01 Z25F10
G01 Z20F10
G01 X43.625Y32.305F700
G01 Z25F10
G01 Z20F10
G01 X39.915Y10.055F700
G01 Z25F10
G01 Z20F10
G01 X42.455Y10.055F700
G01 Z25F10
G01 Z20F10
G01 X44.995Y10.055F700
G01 Z25F10
G01 Z20F10
G01 X47.535Y10.055F700
G01 Z25F10
G01 Z20F10
G01 X25.955Y9.445F700
G01 Z25F10
G01 Z20F10
G01 X10.08Y9.445F700
G01 Z25F10
G01 Z20F10
G01 X50.085Y29.13F700
G01 Z25F10
G01 Z20F10
G01 X42.465Y29.13F700
G01 Z25F10
G01 Z20F10
G01 X45.005Y21.51F700
G01 Z25F10
G01 Z20F10
G01 X50.085Y21.51F700
G01 Z25F10
G01 Z20F10
G01 X42.465Y21.51F700
G01 Z25F10
G01 Z20F10
G01 X45.005Y29.13F700
G01 Z25F10
G01 Z20F10
G01 X45.025Y13.255F700
G01 Z25F10
G01 Z20F10
G01 X47.525Y13.255F700
G01 Z25F10
G01 Z20F10
G01 X43.64Y17.7F700
G01 Z25F10
G01 Z20F10
G01 X45.64Y17.7F700
G01 Z25F10
G01 Z20F10
G01 X49.958Y15.824F700
G01 Z25F10
G01 Z20F10
G01 X49.958Y18.364F700
G01 Z25F10
G01 Z20F10

M5 ; disabling spindle PWM

; Returning the Deactivating Tool-2
C0 ; PWM Tool select demultiplexer to select tool zero which is the empty tool slot in multiplexers
#TODO X0Y0Z0 ;  ;Remove tool offset coordinate
G01 X165Y91Z12 ; Go to Tool-2 Home Pos
G01 X92 ; Enter Female Kinematic Mount Home Pos
A0 ; Latch OFF Kinematic Mount
G4 P5 ; Wait for Kinematic Mount to fully detach
G01 X188 ; Exit Female Kinematic Mount Home Pos


; The following gcode is the ink laying gcode
; According to input gerber file it will have 11 number of y iterations and Over-lapping distance is 1.2

; Getting and Activating Tool-3, The Tool.Pen
G01 X165Y185.5Z12 ; Go to Tool-3 Home Pos
G01 X188 ; Enter Female Kinematic Mount Home Pos
A1 ; Latch on Kinematic Mount
G4 P5 ; Wait for Kinematic Mount to fully attach
G01 X92 ; Exit Female Kinematic Mount Home Pos
#TODO X0Y0Z0 ;  ;Add tool offset coordinate
C3 ; Choosing tool 3 in the choose demultiplexer circuits

F100 ; setting default feedrate for ink laying

G00X5.8Y5.8Z10 ; ; Go to ink laying starting position
G01 X51.825
G01 Y8.6
G01 X5.8
G01 Y11.4
G01 X51.825
G01 Y14.2
G01 X5.8
G01 Y17.0
G01 X51.825
G01 Y19.8
G01 X5.8
G01 Y22.6
G01 X51.825
G01 Y25.4
G01 X5.8
G01 Y28.2
G01 X51.825
G01 Y31.0
G01 X5.8
G01 Y33.8
G01 X51.825
G01 Y36.6

G00Z0 ; Get away from PCB in Z axis

M5 ; Disable End-Effector Signal

; Returning the Deactivating Tool-3
C0 ; PWM Tool select demultiplexer to select tool zero which is the empty tool slot in multiplexers
#TODO X0Y0Z0 ;  ;Remove tool offset coordinate
G01 X165Y185.5Z12 ; Go to Tool-3 Home Pos
G01 X92 ; Enter Female Kinematic Mount Home Pos
A0 ; Latch OFF Kinematic Mount
G4 P5 ; Wait for Kinematic Mount to fully detach
G01 X188 ; Exit Female Kinematic Mount Home Pos


; The following gcode is the PCB trace laser marking gcode

M5 ; Being extra sure it won't light up before activation; Getting and Activating Tool-1, The Tool.Laser
G01 X165Y0Z11 ; Go to Tool-1 Home Pos
G01 X188 ; Enter Female Kinematic Mount Home Pos
A1 ; Latch on Kinematic Mount
G4 P5 ; Wait for Kinematic Mount to fully attach
G01 X92 ; Exit Female Kinematic Mount Home Pos
#TODO X0Y0Z0 ;  ;Add tool offset coordinate
C1 ; Choosing tool 1 in the choose demultiplexer circuits

F600 ; setting default feedrate

G00Z16 ; Moving to correct focal length Z position

S150 ; Setting Laser Power


M5 ; Disable End-Effector Signal

; Returning the Deactivating Tool-1
C0 ; PWM Tool select demultiplexer to select tool zero which is the empty tool slot in multiplexers
#TODO X0Y0Z0 ;  ;Remove tool offset coordinate
G01 X165Y0Z11 ; Go to Tool-1 Home Pos
G01 X92 ; Enter Female Kinematic Mount Home Pos
A0 ; Latch OFF Kinematic Mount
G4 P5 ; Wait for Kinematic Mount to fully detach
G01 X188 ; Exit Female Kinematic Mount Home Pos

G00X0Y0Z0
B0 ; Turn Machine OFF
